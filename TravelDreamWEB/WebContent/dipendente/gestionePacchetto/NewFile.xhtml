<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
	<title>Login</title>
</h:head>
<h:body>
	      
	<h:link outcome="aggiungiInfoGenerali" class="btn btn-default pull-right"
			value="Aggiungi nuovo pacchetto" />
			  	
	<h:form id="form">  

    <p:dataTable var="pacchetto" value="#{pacchettoBean.pacchetti}" id="pacchettiTable" lazy="true">  
  
        <p:column headerText="Nome" sortBy="nome" >  
            <h:outputText value="#{pacchetto.nome}" />  
        </p:column>  
  
        <p:column headerText="Localita" sortBy="year" >  
            <h:outputText value="#{pacchetto.localita}" />  
        </p:column>  
  
        <p:column headerText="Descrizione" >  
            <h:outputText value="#{pacchetto.descrizione}" />  
        </p:column>  
  
        <p:column headerText="Inizio validità" sortBy="inizioValidita" >  
            <h:outputText value="#{pacchetto.inizioValidita}" >
            	<f:convertDateTime type="date" pattern="MM:dd:yyy HH:mm" />
            </h:outputText>  
        </p:column>  
        
        <p:column headerText="Fine validità" sortBy="fineValidita" >  
            <h:outputText value="#{pacchetto.fineValidita}" >
            	<f:convertDateTime type="date" pattern="MM:dd:yyy HH:mm" />
            </h:outputText>  
        </p:column> 
        
        <p:column>
        	
			<p:commandButton id="basic" value="Basic"   type="button" >
				<p:ajax  actionListener="#{pacchettoBean.mostraInfo}" update=":form:displayAndata" oncomplete="PF('andataDialog').show();" />
			</p:commandButton>
			
		</p:column>
    </p:dataTable>  

  
    <p:dialog header="Voli andata" widgetVar="andataDialog" resizable="false" >  
    
    <p:dataTable id="displayAndata" var="volo" value="#{pacchettoBean.pacchettoDaVisualizzareDto.voliAndata}">
				
				<p:column sortBy="nomeCompagnia" headerText="Compagnia aerea">
					<h:outputText value="#{volo.nomeCompagnia}" />
				</p:column>

				<p:column sortBy="cittaPartenza" headerText="Città di partenza">
					<h:outputText value="#{volo.cittaPartenza}" />
				</p:column>

				<p:column sortBy="cittaArrivo" headerText="Città di arrivo">
					<h:outputText value="#{volo.cittaArrivo}" />
				</p:column>

				<p:column sortBy="partenza" headerText="Data di Partenza">
					<h:outputText value="#{volo.partenza}">
						<f:convertDateTime type="date" pattern="MM:dd:yyy HH:mm" />
					</h:outputText>
				</p:column>

				<p:column sortBy="arrivo" headerText="Data di arrivo">
					<h:outputText value="#{volo.arrivo}">
						<f:convertDateTime type="date" pattern="MM:dd:yyy HH:mm" />
					</h:outputText>
				</p:column>

				<p:column sortBy="disponibilita" headerText="Posti disponibili">
					<h:outputText value="#{volo.disponibilita}" />


				</p:column>

				<p:column sortBy="costo" headerText="Prezzo">
					<h:outputText value="#{volo.costo} €" />
				</p:column>

			</p:dataTable>
  
          
    </p:dialog>  
    
</h:form> 
 
		<script>
			$(function() {
				$('.active').removeClass('active');
				$('.nav li:nth-child(4)').addClass('active');
			});
		</script>
		
</h:body>
</html>